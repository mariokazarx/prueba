<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Nuevo Usuario</title>
        <style type="text/css">
            .ui-widget {
                font-size: 90%;
            }
        </style>
    </h:head>
    <h:body>
        <h:form id="frmUsuario">
            <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true"/>
            <p:growl id="mensajeGeneral" showDetail="true" sticky="false" />

            <h:panelGrid columns="3">
                <p:outputLabel for="txtCedula" value="Cedula: " />
                <p:inputText id="txtCedula" value="#{mbvUsuario.usuario.identificacion}" size="50" >
                    <f:validator validatorId="validatorVacio"/>
                </p:inputText>
                <p:message for="txtCedula"/>
                <p:outputLabel for="txtNombre" value="Nombres: " />
                <p:inputText id="txtNombre" value="#{mbvUsuario.usuario.nombres}" size="50" >
                    <f:validator validatorId="validatorVacio"/>
                </p:inputText>
                <p:message for="txtNombre"/>
                <p:outputLabel for="txtApellidos" value="Apellidos: " />
                <p:inputText id="txtApellidos" value="#{mbvUsuario.usuario.apellidos}" size="50">
                    <f:validator validatorId="validatorVacio"/>
                </p:inputText>
                <p:message for="txtApellidos"/>
                <p:outputLabel for="txtTelefono" value="Telefono: " />
                <p:inputText id="txtTelefono" value="#{mbvUsuario.usuario.telefono}" size="50" >
                    <f:validator validatorId="validatorVacio"/>
                </p:inputText>
                <p:message for="txtTelefono"/>
                <p:outputLabel for="txtDireccion" value="Direccion: " />
                <p:inputText id="txtDireccion" value="#{mbvUsuario.usuario.direccion}" size="50">
                    <f:validator validatorId="validatorVacio"/>
                </p:inputText>
                <p:message for="txtDireccion"/>
                <p:outputLabel for="txtCorreo" value="Correo: " />
                <p:inputText id="txtCorreo" value="#{mbvUsuario.usuario.correo}" size="50">
                    <f:validator validatorId="validatorVacio"/>
                </p:inputText>
                <p:message for="txtCorreo"/>
                <p:outputLabel for="txtCargo" value="Cargo: " />
                <p:inputText id="txtCargo" value="#{mbvUsuario.usuario.cargo}" size="50">
                    <f:validator validatorId="validatorVacio"/>
                </p:inputText>
                <p:message for="txtCargo"/>
                <p:outputLabel value="Contraseña" for="txtContrasenia"/>
                <p:password id="txtContrasenia" label="Contraseña: " match="txtContraseniaRepita" size="50" value="#{mbvUsuario.usuario.contraseña}">
                    <f:validator validatorId="validatorVacio"/>
                </p:password>
                <p:message for="txtContrasenia"/>
                <p:outputLabel value="Repita contraseña" for="txtContraseniaRepita"/>
                <p:password id="txtContraseniaRepita" label="Repita contraseña: " size="50" value="#{mbvUsuario.txtRepiteContrasenia}"/>
                <h:panelGroup></h:panelGroup>
                <p:outputLabel for="selectRecurso" value="Recursos:" />
                <p:selectOneMenu id="selectRecurso" value="#{mbvUsuario.recursoSelected.recursoId}">
                    <p:ajax listener="#{mbvUsuario.cargarPermiso()}" update="chkPermisos"/>
                    <f:selectItem itemLabel="Seleccione."/>
                    <f:selectItems value="#{mbvUsuario.recursos}" var="recurso" itemLabel="#{recurso.nombre}" itemValue="#{recurso.recursoId}"/>
                </p:selectOneMenu>
                <p:message for="selectRecurso"/>
                <p:outputLabel value="El usuario puede:" />
                <h:panelGroup id="chkPermisos">
                    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                        <h:outputText value="Consultar: " />
                        <p:selectBooleanButton id="chkConsultar" value="#{mbvUsuario.roleActual.consultar}" onLabel="Yes" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px">
                            <p:ajax update="tablaperfil" listener="#{mbvUsuario.checkPermiso}" />
                        </p:selectBooleanButton>
                        <h:outputText value="Edita: " />
                        <p:selectBooleanButton id="chkEsditar" value="#{mbvUsuario.roleActual.editar}" onLabel="Yes" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px">
                            <p:ajax update="tablaperfil" listener="#{mbvUsuario.checkPermiso}" />
                        </p:selectBooleanButton> 
                        <h:outputText value="Adicionar: " />
                        <p:selectBooleanButton id="chkAdicionar" value="#{mbvUsuario.roleActual.agregar}" onLabel="Yes" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:60px">
                            <p:ajax update="tablaperfil" listener="#{mbvUsuario.checkPermiso}" />
                        </p:selectBooleanButton>
                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup></h:panelGroup>
                <h:panelGroup></h:panelGroup>
                <p:commandButton value="Registrar Profesor" actionListener="#{mbvUsuario.insertar}" ajax="true" update="frmUsuario" />
            </h:panelGrid> 
            <p:dataTable var="rol" value="#{mbvUsuario.rolesRecursos}" id="tablaperfil">
                <p:column headerText="Recurso">
                    <h:outputText value="#{rol.recursoId.nombre}" />
                </p:column>

                <p:column headerText="Consultar">
                    <h:outputText value="#{rol.consultar}" />
                </p:column>

                <p:column headerText="Editar">
                    <h:outputText value="#{rol.editar}" />
                </p:column>

                <p:column headerText="Adicionar">
                    <h:outputText value="#{rol.agregar}" />
                </p:column>
            </p:dataTable>
        </h:form>
    </h:body>
</html>
